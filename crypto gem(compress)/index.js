const express=require("express"),mongoose=require("mongoose"),{MongoClient}=require("mongodb"),path=require("path"),{send}=require("process"),airdrop=require("./airdrop"),ads=require("./ads"),promotedCoins=require("./promotedCoins"),app=express(),PORT=process.env.PORT||5e3,connctionUrl="mongodb+srv://admin:4Q6nhmYrwoChomAk@cluster0.oy4m1.mongodb.net/crpytoGems?retryWrites=true&w=majority";mongoose.connect(connctionUrl,{useNewUrlParser:!0,useCreateIndex:!0,useUnifiedTopology:!0}),app.use(express.static(__dirname+"/public")),app.use(express.json()),app.get("/",(a,b)=>{b.sendFile(path.join(__dirname,"./public/index.html"))}),app.get("/contact",(a,b)=>{b.sendFile(path.join(__dirname,"./public/contact.html"))}),app.get("/airdrop",(a,b)=>{b.sendFile(path.join(__dirname,"./public/airdrop.html"))}),app.get("/address",(a,b)=>{b.sendFile(path.join(__dirname,"./public/data.html"))}),app.get("/transaction",(a,b)=>{b.sendFile(path.join(__dirname,"./public/transaction.html"))}),app.post("/data/airdrop",(a,b)=>{const c=a.body;airdrop.create(c,(a,c)=>{a?b.send(a):b.send(c)})}),app.get("/data/airdrop",(a,b)=>{airdrop.find({},(a,c)=>{a&&console.log(a),b.send(c)})}),app.get("/data/ads",(a,b)=>{ads.find({},(a,c)=>{a&&console.log(a),b.send(c)})}),app.post("/data/coins",(a,b)=>{const c=a.body;promotedCoins.create(c,(a,c)=>{a?b.send(a):b.send(c)})}),app.get("/data/coins",(a,b)=>{promotedCoins.find({},(a,c)=>{a&&console.log(a),b.send(c)})}),app.listen(PORT);